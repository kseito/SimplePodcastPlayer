name: ktlint

on:
    pull_request:
        types: [opened, synchronize, reopened]

jobs:
    kotlin:
        name: runner / suggester / spotless
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6
            - uses: actions/setup-java@c1e323688fd81a25caa38c78aa6df2d33d3e20d9 # v4
              with:
                  java-version: 17
                  distribution: "temurin"
                  cache: "gradle"
            - run: git fetch origin main
            - run: ./gradlew spotlessKotlinApply
            - uses: reviewdog/action-suggester@aa38384ceb608d00f84b4690cacc83a5aba307ff # v1.24.0
              with:
                  github_token: ${{ secrets.GITHUB_TOKEN }}
                  tool_name: spotless
            - run: ./gradlew spotlessKotlinCheck
